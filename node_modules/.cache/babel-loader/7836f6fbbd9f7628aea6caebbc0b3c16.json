{"ast":null,"code":"import _toConsumableArray from\"/home/kido3/Desktop/Kido/kido-book-trial/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/kido3/Desktop/Kido/kido-book-trial/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useState,useEffect,useContext}from\"react\";import style from\"./TimeSlot.module.css\";import Modal from'../../../common/Modal/Modal';import Axios from\"axios\";import{AuthContext}from'../../../context/Auth';import $ from\"jquery\";function TimeSlot(props){var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModal=_useState2[0],setShowModal=_useState2[1];var teachersName=props.teachersName,scheduleDateId=props.scheduleDateId,groupId=props.groupId,childAgeGroup=props.childAgeGroup;var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),cardData=_useState4[0],setCardData=_useState4[1];// to handle details of card\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showDetails=_useState6[0],setShowDetails=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),cardTimeSlot=_useState8[0],setCardTimeSlot=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),teacherListDetail=_useState10[0],setTeacherList=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),editDetails=_useState12[0],setEditDetails=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),scheduleTimeId=_useState14[0],setScheduleTimeId=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isCardAdded=_useState16[0],setIsCardAdded=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isCardDelete=_useState18[0],setIsCardDelete=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),isCardEdited=_useState20[0],setIsCardEdited=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),timeSlot=_useState22[0],SetTimeSlot=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),teacherList=_useState24[0],setTeam=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),formComplete=_useState26[0],setFormComplete=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),formIncompleteError=_useState28[0],setFormIncompleteError=_useState28[1];// to split members list string into array\nvar memberArr=teachersName.split(\",\");var cardTimeSlots=React.useRef();var teacherListDetails=React.useRef();var userId=currentUser.uid;// to Hide past date\n// var today = new Date();\n// var month,\n//   day = null;\n// if (today.getMonth() < 10 || today.getDate() < 10) {\n//   month = \"0\" + (today.getMonth() + 1);\n//   day = \"0\" + today.getDate();\n// }\n// var date = today.getFullYear() + \"-\" + month + \"-\" + day;\nuseEffect(function(){setIsCardAdded(false);setIsCardDelete(false);setIsCardEdited(false);getCardData();},[isCardAdded,isCardDelete,isCardEdited]);var getCardData=function getCardData(){Axios.get(\"https://kido-bookt-backend-default-rtdb.firebaseio.com/groupContents/\".concat(groupId,\"/scheduleDate/\").concat(scheduleDateId,\"/scheduleTime.json\")).then(function(response){console.log(response);setCardData(response.data);}).catch(function(error){return console.log(error);});};//  to Add and Edit cardData in DB\nvar handleAddCardData=function handleAddCardData(e){//   check if all input is taken\nif(cardTimeSlots.current.value.length===0||teacherListDetails.current.value.length===1){setFormComplete(false);setFormIncompleteError(true);}else{// if user wants to edit then put request is used\nif(editDetails){Axios.put(\"https://kido-bookt-backend-default-rtdb.firebaseio.com/groupContents/\".concat(groupId,\"/scheduleDate/\").concat(scheduleDateId,\"/scheduleTime/\").concat(scheduleTimeId,\".json\"),{timeSlot:timeSlot===\"\"?cardTimeSlot:timeSlot,teacherList:teacherList.length===0?teacherListDetail:teacherList}).then(function(response){alert(\"Time Slot edited succesfully\");setIsCardEdited(true);}).catch(function(error){return console.log(\"Error in editDetails\"+error);});}//  if user wants to add a new card\nelse{Axios.post(\"https://kido-bookt-backend-default-rtdb.firebaseio.com/groupContents/\".concat(groupId,\"/scheduleDate/\").concat(scheduleDateId,\"/scheduleTime.json\"),{timeSlot:timeSlot,teacherList:teacherList}).then(function(response){alert(\"Time Slot added succesfully\");setIsCardAdded(true);}).catch(function(error){return console.log(\"Error\"+error);});}setShowModal(false);setEditDetails(false);SetTimeSlot(\"\");setTeam([]);}};// on click of card this function shows details\nvar onCardClick=function onCardClick(cardTimeSlot,teacherListDetails,scheduleTimeId,e){setShowDetails(true);setCardTimeSlot(cardTimeSlot);setTeacherList(teacherListDetails);setScheduleTimeId(scheduleTimeId);};// handles edit button click\nvar handleEdit=function handleEdit(e){setShowDetails(false);setShowModal(true);setEditDetails(true);};// handles archive on card archive click\nvar handleArchive=function handleArchive(e){Axios.delete(\"https://kido-bookt-backend-default-rtdb.firebaseio.com/groupContents/\".concat(groupId,\"/scheduleDate/\").concat(scheduleDateId,\"/scheduleTime/\").concat(scheduleTimeId,\".json\")).then(function(response){alert(\"Time Slot archived succesfully\");setIsCardDelete(true);}).catch(function(error){return console.log(\"Error\"+error);});setShowDetails(false);};//To display multiple teacherList member selected\nvar onSelectChange=function onSelectChange(e){var values=_toConsumableArray(e.target.selectedOptions).map(function(opt){return opt.value;});setTeam(values);};var modalCloseHandler=function modalCloseHandler(){setShowModal(false);setEditDetails(false);};var showmodalCloseHandler=function showmodalCloseHandler(){setShowDetails(false);};//modal of Add and Edit Card\nvar modalContent=showModal?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container py-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12 text-left\",children:[/*#__PURE__*/_jsx(\"h3\",{children:editDetails?'Edit Time Slot':'Add Time Slot'}),formIncompleteError?/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:\"Kindly complete the form before adding Time\"}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"timeslot\",children:\"Enter a Time slot for your Schedule date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"timepicker\",defaultValue:editDetails?cardTimeSlot:\"\",placeholder:\"e.g. Add Time Slot\",ref:cardTimeSlots,onChange:function onChange(e){return SetTimeSlot(e.target.value);},className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"teacherlist\",children:\"Choose Teaches Name for this time slot(select multiple,if needed):\"}),/*#__PURE__*/_jsx(\"select\",{id:\"teacherlist\",name:\"teacherlist\",class:\"form-control\",defaultValue:editDetails?teacherListDetail:\"\",multiple:true,ref:teacherListDetails,onChange:onSelectChange,children:memberArr.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item,children:item},item);})})]}),/*#__PURE__*/_jsx(\"button\",{disabled:formComplete,className:\"btn btn-info btn-sm\",id:\"CreateCard\",onClick:handleAddCardData,children:editDetails?'Edit Time Slot':'Add Time Slot'})]})})})}):null;//modal of show card details\nvar showmodalContent=showDetails?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container my-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-left\",children:[cardTimeSlot,\" Time Slot\"]})})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-left my-4\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Time slot for Child Age Group\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"mx-2 text-primary\",children:childAgeGroup})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-left my-4\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Members\"}),/*#__PURE__*/_jsx(\"div\",{children:teacherListDetail!==undefined&&teacherListDetail.map(function(i){return/*#__PURE__*/_jsx(\"span\",{className:\"mx-2 text-primary\",children:i},i);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mt-5\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",id:\"editBtn\",className:\"btn btn-success btn-sm\",onClick:handleEdit,children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",id:\"archiveBtn\",className:\"btn btn-danger btn-sm\",onClick:handleArchive,children:\"Archive\"})]})]})})})}):null;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:style.CardData,children:[cardData?Object.entries(cardData).map(function(item){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:style.CardInfo,id:item[0],value:item[1].timeSlot,onClick:function onClick(e){return onCardClick(item[1].timeSlot,item[1].teacherList,item[0],e);},children:[/*#__PURE__*/_jsx(\"div\",{className:style.CardHeader,children:/*#__PURE__*/_jsx(\"div\",{className:style.CardName,children:item[1].timeSlot})}),/*#__PURE__*/_jsxs(\"div\",{className:style.CardIcon,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-list\"})}),/*#__PURE__*/_jsx(\"div\",{children:item[1].teacherList!==undefined?item[1].teacherList.map(function(i){return/*#__PURE__*/_jsx(\"span\",{className:style.cardMembers,children:i.charAt(0)},i);}):/*#__PURE__*/_jsx(\"div\",{})})]})]})},item[0]);}):/*#__PURE__*/_jsx(\"small\",{className:style.NotaskAdd,children:\"No Time Slots Added\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right pb-2 pr-2\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-sm\",onClick:function onClick(){return setShowModal(true);},children:\"Add Time Slot\"})})]}),showModal&&/*#__PURE__*/_jsx(Modal,{content:modalContent,close:modalCloseHandler}),showDetails&&/*#__PURE__*/_jsx(Modal,{content:showmodalContent,close:showmodalCloseHandler})]});}export default TimeSlot;","map":{"version":3,"sources":["/home/kido3/Desktop/Kido/kido-book-trial/src/components/Backend/TimeSlot/TimeSlot.js"],"names":["React","useState","useEffect","useContext","style","Modal","Axios","AuthContext","$","TimeSlot","props","currentUser","showModal","setShowModal","teachersName","scheduleDateId","groupId","childAgeGroup","cardData","setCardData","showDetails","setShowDetails","cardTimeSlot","setCardTimeSlot","teacherListDetail","setTeacherList","editDetails","setEditDetails","scheduleTimeId","setScheduleTimeId","isCardAdded","setIsCardAdded","isCardDelete","setIsCardDelete","isCardEdited","setIsCardEdited","timeSlot","SetTimeSlot","teacherList","setTeam","formComplete","setFormComplete","formIncompleteError","setFormIncompleteError","memberArr","split","cardTimeSlots","useRef","teacherListDetails","userId","uid","getCardData","get","then","response","console","log","data","catch","error","handleAddCardData","e","current","value","length","put","alert","post","onCardClick","handleEdit","handleArchive","delete","onSelectChange","values","target","selectedOptions","map","opt","modalCloseHandler","showmodalCloseHandler","modalContent","color","item","showmodalContent","undefined","i","CardData","Object","entries","CardInfo","CardHeader","CardName","CardIcon","cardMembers","charAt","NotaskAdd"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport style from \"./TimeSlot.module.css\";\nimport Modal from '../../../common/Modal/Modal';\nimport Axios from \"axios\";\nimport { AuthContext } from '../../../context/Auth';\nimport $ from \"jquery\";\n\nfunction TimeSlot(props) {\n  const { currentUser } = useContext(AuthContext);\n\n  const [showModal, setShowModal] = useState(false);\n  const { teachersName, scheduleDateId, groupId, childAgeGroup} = props;\n  const [cardData, setCardData] = useState(\"\");\n\n  // to handle details of card\n  const [showDetails, setShowDetails] = useState(false);\n  const [cardTimeSlot, setCardTimeSlot] = useState(\"\");\n  const [teacherListDetail, setTeacherList] = useState([]);\n  const [editDetails, setEditDetails] = useState(false);\n  const [scheduleTimeId, setScheduleTimeId] = useState(\"\");\n\n  const [isCardAdded, setIsCardAdded] = useState(false);\n  const [isCardDelete, setIsCardDelete] = useState(false);\n  const [isCardEdited, setIsCardEdited] = useState(false);\n\n  const [timeSlot, SetTimeSlot] = useState(\"\");\n  const [teacherList, setTeam] = useState([]);\n\n  const [formComplete, setFormComplete] = useState(false);\n  const [formIncompleteError, setFormIncompleteError] = useState(false);\n\n  // to split members list string into array\n  const memberArr = teachersName.split(\",\");\n\n  const cardTimeSlots = React.useRef();\n  const teacherListDetails = React.useRef();\n\n  const userId = currentUser.uid;\n\n    // to Hide past date\n    // var today = new Date();\n    // var month,\n    //   day = null;\n    // if (today.getMonth() < 10 || today.getDate() < 10) {\n    //   month = \"0\" + (today.getMonth() + 1);\n    //   day = \"0\" + today.getDate();\n    // }\n    // var date = today.getFullYear() + \"-\" + month + \"-\" + day;\n\n    useEffect(() => {\n      setIsCardAdded(false);\n      setIsCardDelete(false);\n      setIsCardEdited(false);\n      getCardData();\n    }, [isCardAdded, isCardDelete, isCardEdited]);\n\n\n  const getCardData = () => {\n    Axios\n    .get(`https://kido-bookt-backend-default-rtdb.firebaseio.com/groupContents/${groupId}/scheduleDate/${scheduleDateId}/scheduleTime.json`)\n    .then((response) => {\n      console.log(response);\n        setCardData(response.data);\n    })\n    .catch((error) => console.log(error));\n};\n\n  \n  //  to Add and Edit cardData in DB\n  const handleAddCardData = (e) => {\n    //   check if all input is taken\n    if(cardTimeSlots.current.value.length === 0 || teacherListDetails.current.value.length === 1){\n      setFormComplete(false);\n      setFormIncompleteError(true);\n    } else {\n      // if user wants to edit then put request is used\n      if (editDetails) {\n        Axios\n        .put(`https://kido-bookt-backend-default-rtdb.firebaseio.com/groupContents/${groupId}/scheduleDate/${scheduleDateId}/scheduleTime/${scheduleTimeId}.json`,\n          {\n            timeSlot: timeSlot === \"\" ? cardTimeSlot : timeSlot,\n            teacherList: teacherList.length === 0 ? teacherListDetail : teacherList,\n          }\n        )\n          .then((response) => {\n            alert(\"Time Slot edited succesfully\");\n            setIsCardEdited(true);\n          })\n          .catch((error) => console.log(\"Error in editDetails\" + error));\n      }\n      //  if user wants to add a new card\n      else {\n        Axios\n        .post(`https://kido-bookt-backend-default-rtdb.firebaseio.com/groupContents/${groupId}/scheduleDate/${scheduleDateId}/scheduleTime.json`,\n          {\n            timeSlot: timeSlot,\n            teacherList: teacherList,\n          }\n        )\n          .then((response) => {\n            alert(\"Time Slot added succesfully\");\n            setIsCardAdded(true);\n          })\n          .catch((error) => console.log(\"Error\" + error));\n      }\n\n      setShowModal(false);\n      setEditDetails(false);\n\n      SetTimeSlot(\"\");\n      setTeam([]);\n    }\n  };\n\n  // on click of card this function shows details\n  const onCardClick = (\n    cardTimeSlot,\n    teacherListDetails,\n    scheduleTimeId,\n    e\n  ) => {\n    setShowDetails(true);\n\n    setCardTimeSlot(cardTimeSlot);\n    setTeacherList(teacherListDetails);\n    setScheduleTimeId(scheduleTimeId);\n  };\n\n   // handles edit button click\n   const handleEdit = (e) => {\n    setShowDetails(false);\n    setShowModal(true);\n    setEditDetails(true);\n  };\n\n  // handles archive on card archive click\n  const handleArchive = (e) => {\n    Axios\n    .delete(`https://kido-bookt-backend-default-rtdb.firebaseio.com/groupContents/${groupId}/scheduleDate/${scheduleDateId}/scheduleTime/${scheduleTimeId}.json`)\n      .then((response) => {\n        alert(\"Time Slot archived succesfully\");\n        setIsCardDelete(true);\n      })\n      .catch((error) => console.log(\"Error\" + error));\n\n    setShowDetails(false);\n  };\n\n//To display multiple teacherList member selected\n  const onSelectChange = (e) => {\n    const values = [...e.target.selectedOptions].map((opt) => opt.value);\n    setTeam(values);\n  };\n\n\n\n\n  const  modalCloseHandler = () => { setShowModal(false);setEditDetails(false);};\n\n  const  showmodalCloseHandler = () => {setShowDetails(false)};\n\n  //modal of Add and Edit Card\n  let modalContent = showModal ? \n\n  (\n      <>\n\n    <div className=\"container py-4\">\n      <div className=\"row\">\n        <div className=\"col-md-12 text-left\">\n          <h3>{editDetails ? 'Edit Time Slot' : 'Add Time Slot'}</h3>\n          {formIncompleteError ? <p style={{color : 'red'}}>Kindly complete the form before adding Time</p> : null}\n        <div className=\"form-group\">\n          <label htmlFor=\"timeslot\">Enter a Time slot for your Schedule date:</label>\n          <input type=\"text\" id=\"timepicker\" defaultValue={editDetails ? cardTimeSlot : \"\"} \n          placeholder=\"e.g. Add Time Slot\" ref={cardTimeSlots} \n          onChange={(e) => SetTimeSlot(e.target.value)} className=\"form-control\"/>\n        </div> \n        <div className=\"form-group\">\n          <label htmlFor=\"teacherlist\">Choose Teaches Name for this time slot(select multiple,if needed):</label>\n          <select  id=\"teacherlist\" name=\"teacherlist\" class=\"form-control\" defaultValue={editDetails ? teacherListDetail : \"\"}\n          multiple ref={teacherListDetails} \n          onChange={onSelectChange}>{memberArr.map((item) => (<option value={item} key={item}>{item}</option>))}\n          </select>\n        </div> \n        <button disabled={formComplete} className=\"btn btn-info btn-sm\" \n        id=\"CreateCard\" onClick={handleAddCardData}>{editDetails ? 'Edit Time Slot' : 'Add Time Slot'}</button>\n        </div>\n      </div>\n    </div>\n      </>\n  )\n  :null;\n\n  //modal of show card details\n  let showmodalContent = showDetails ? \n\n  (\n      <>\n\n      <div className=\"container my-4\">\n        <div className=\"row\">\n          <div className=\"col-lg-12\">\n          <div className=\"\">\n            <div><h3 className=\"text-left\">{cardTimeSlot} Time Slot</h3></div>\n          </div>\n          <hr/>\n          <div className=\"text-left my-4\">\n            <h4>Time slot for Child Age Group</h4>\n            <div>\n                <span className=\"mx-2 text-primary\">{childAgeGroup}</span>\n            </div>\n          </div>\n          <div className=\"text-left my-4\">\n            <h4>Members</h4>\n            <div>\n              {teacherListDetail !== undefined &&\n                teacherListDetail.map((i) => (\n                  <span className=\"mx-2 text-primary\" key={i}>{i}</span>\n                ))}\n            </div>\n          </div>\n          <div className=\"d-flex justify-content-between mt-5\">\n            <button type=\"button\" id=\"editBtn\" className=\"btn btn-success btn-sm\" onClick={handleEdit}>Edit</button>\n            <button type=\"button\" id=\"archiveBtn\" className=\"btn btn-danger btn-sm\" onClick={handleArchive}>Archive</button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n   \n      </>\n  )\n  :null;\n\n  return (\n    <div>\n      <div className={style.CardData}>\n      {cardData ?\n        Object.entries(cardData).map((item) => (\n          <div  key={item[0]}>\n          <div className={style.CardInfo}      \n                id={item[0]}\n                value={item[1].timeSlot}\n                onClick={(e) =>\n                  onCardClick(\n                    item[1].timeSlot,\n                    item[1].teacherList,\n                    item[0],\n                    e\n                  )\n                }\n                >\n          <div className={style.CardHeader}>\n          <div className={style.CardName}>{item[1].timeSlot}</div>\n          </div>\n          <div className={style.CardIcon}>\n          <div><i className=\"fas fa-list\"></i></div>\n          <div>\n                    {item[1].teacherList !== undefined ? (\n                      item[1].teacherList.map((i) => (\n                        <span className={style.cardMembers} key={i}>\n                          {i.charAt(0)}\n                        </span>\n                      ))\n                    ) : (\n                      <div></div>\n                    )}\n                  </div>\n          </div>\n          </div>\n          </div>\n         ) ): <small className={style.NotaskAdd}>No Time Slots Added</small>}\n          <div className=\"text-right pb-2 pr-2\">\n            <button className=\"btn btn-primary btn-sm\" onClick={() => setShowModal(true)} >Add Time Slot</button>\n          </div>\n      </div>\n        {showModal && (\n        \n            <Modal  \n                content = {modalContent}\n                close = {modalCloseHandler}/> \n        )}\n       \n       {showDetails && (\n        \n        <Modal  \n            content = {showmodalContent}\n            close = {showmodalCloseHandler}/> \n    )}\n\n    </div>\n)\n}\n\nexport default TimeSlot;\n"]},"metadata":{},"sourceType":"module"}